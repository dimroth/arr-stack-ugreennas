# Project Overview

> Generated by Document Project workflow on 2026-02-19

## Project Identity

| Field | Value |
|-------|-------|
| **Name** | Pharkie's Ultimate Arr Stack for Ugreen and Beyond |
| **Repository** | arr-stack-ugreennas |
| **Type** | Infrastructure / Docker Compose Media Automation Stack |
| **License** | CC BY-NC 4.0 (docs/configs); component software retains own licenses |
| **Origin** | Forked from TheRealCodeVoyage/arr-stack-setup-with-pihole |

## Purpose

A production-ready Docker Compose stack for automated media management on NAS devices. Users request TV shows or movies through Seerr, which triggers Sonarr/Radarr to search via Prowlarr, download through qBittorrent (torrents) or SABnzbd (Usenet) behind a VPN (Gluetun), and the media appears in Jellyfin ready to watch.

Works on Ugreen, Synology, QNAP, or any Docker host.

## Architecture Summary

| Aspect | Detail |
|--------|--------|
| **Architecture Pattern** | Multi-file Docker Compose with layered services |
| **Repository Type** | Monolith |
| **Deployment Target** | Remote NAS (not local machine) |
| **Service Count** | 27+ containers across 5 compose files |
| **Networking** | Bridge network (172.20.0.0/24) with static IPs + macvlan for LAN presence |
| **VPN Model** | Download services share Gluetun's network namespace; streaming/management services connect directly |

## Technology Stack

| Category | Technology | Version | Purpose |
|----------|-----------|---------|---------|
| Container Runtime | Docker + Docker Compose | v2 | Service orchestration |
| Reverse Proxy | Traefik | v3.0 | `.lan` domain routing, TLS |
| VPN Gateway | Gluetun | v3.41 | Routes download traffic through VPN |
| DNS/DHCP | Pi-hole | 2025.11.1 | Local DNS, ad-blocking, DHCP |
| Media Server | Jellyfin | 10.11 | Streaming (Netflix-like experience) |
| Request Portal | Seerr | latest | User-facing request interface |
| TV Management | Sonarr | 4.0.16 | TV show monitoring and downloading |
| Movie Management | Radarr | 6.0.4 | Movie monitoring and downloading |
| Indexer Manager | Prowlarr | 2.3.0 | Manages torrent/Usenet indexers |
| Torrent Client | qBittorrent | 5.1.4 | Torrent downloads (VueTorrent UI) |
| Usenet Client | SABnzbd | 4.5.5 | Usenet downloads |
| Subtitle Manager | Bazarr | latest | Automatic subtitle downloads |
| Tunnel | Cloudflared | 2026.2.0 | Secure external access via Cloudflare |
| Mesh VPN | Tailscale | latest | Full remote LAN access |
| Photo Management | Immich | release | Self-hosted photo/video backup |
| Quality Profiles | Recyclarr | latest | TRaSH Guide sync to Sonarr/Radarr |
| Tesla Logging | TeslaMate | latest | Vehicle data logging with Grafana dashboards |
| MQTT Broker | Mosquitto | 2 | MQTT for TeslaMate |
| Cloudflare Bypass | FlareSolverr | v3.4.6 | CAPTCHA solving for Prowlarr |
| Auto-Recovery | Deunhealth | v0.3.0 | Restarts services on VPN reconnect |
| Monitoring | Uptime Kuma | 2 | Service health monitoring |
| Disk Usage | duc | v1.1.0 | Visual storage treemap |
| System Metrics | Beszel | 0.18 | CPU, RAM, disk, container monitoring |
| Image Updates | DIUN | 4.31.0 | Telegram notifications for new images |
| Testing | BATS | latest | Bash Automated Testing System |
| Shell Scripting | Bash | - | Automation, pre-commit hooks, backups |
| Databases | PostgreSQL 17 (TeslaMate), PostgreSQL 14 + pgvecto.rs (Immich) | - | Application data |
| Cache/Queue | Valkey 9 (Redis-compatible) | - | Immich job queue |

## Setup Levels

The stack supports modular setup levels:

| Level | Access Method | Components Added |
|-------|---------------|-----------------|
| **Core** | `NAS_IP:port` | Gluetun, qBittorrent, SABnzbd, Sonarr, Radarr, Prowlarr, Jellyfin, Seerr, Bazarr, Pi-hole |
| **+ Local DNS** | `service.lan` | Traefik reverse proxy |
| **+ Remote Access** | `service.yourdomain.com` | Cloudflare Tunnel |
| **+ Tailscale** | `.lan` from anywhere | Tailscale mesh VPN subnet router |
| **+ Immich** | Photo management | Immich server, ML, PostgreSQL, Redis |
| **+ Utilities** | Monitoring | Uptime Kuma, Beszel, duc, DIUN, deunhealth, qbit-scheduler |

## Key Design Decisions

- **Static IPs**: Every container has a fixed IP on 172.20.0.0/24 to prevent post-restart resolution failures
- **Separate compose files**: Independent lifecycle management per layer (infra, apps, utilities)
- **VPN for downloads only**: Protects privacy where needed without slowing streaming
- **macvlan networking**: Gives Traefik and Pi-hole their own LAN IPs for port 80 and DHCP
- **Named volumes**: Data persists across container updates; backed up with included script
- **`.example` pattern**: Tracked templates users copy and customize; actual configs gitignored

## Related Documentation

- [Architecture](./ARCHITECTURE.md) - Network topology, service connections, design decisions
- [Setup Guide](./SETUP.md) - Complete installation walkthrough
- [Quick Reference](./REFERENCE.md) - URLs, ports, IPs, commands
- [Backup & Restore](./BACKUP.md) - Volume backup automation
- [Upgrading](./UPGRADING.md) - Version upgrade procedures
- [Troubleshooting](./TROUBLESHOOTING.md) - Common issues and fixes
- [Contributing](../CONTRIBUTING.md) - Project structure, pre-commit hooks, release process
