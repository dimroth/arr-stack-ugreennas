# Project Documentation Index

> Generated by Document Project workflow on 2026-02-19
>
> This is the master entry point for AI-assisted development with this project.

## Project Overview

- **Name:** Pharkie's Ultimate Arr Stack for Ugreen and Beyond
- **Type:** Monolith — Infrastructure / Docker Compose Media Automation Stack
- **Primary Stack:** Docker Compose (multi-file), Traefik v3, Gluetun VPN, Pi-hole DNS/DHCP
- **Architecture:** Layered services with VPN network namespace sharing
- **Services:** 27+ containers across 5 compose files
- **Target:** Remote NAS deployment (UGOS, Synology, QNAP, or any Docker host)

## Quick Reference

- **Tech Stack:** Docker Compose, Traefik v3, Gluetun, Pi-hole, Tailscale, Cloudflare Tunnel, BATS
- **Deployment:** `git push` → `git pull` on NAS → `docker compose up -d --force-recreate`
- **Testing:** BATS test suite + 11 pre-commit validation checks
- **Backup:** Daily automated backup to USB (~13MB compressed), 7-day retention
- **Networks:** `arr-stack` (172.20.0.0/24 bridge), `traefik-lan` (macvlan), `vpn-net` (10.8.1.0/24)

## Generated Documentation (AI Context)

These documents provide comprehensive project context for AI-assisted development:

- [Project Overview](./project-overview.md) — Purpose, tech stack, architecture summary, design decisions
- [Architecture Technical Reference](./architecture-technical.md) — Deep technical detail: dependency graph, IP allocation, inter-service communication, volumes, health checks, security
- [Source Tree Analysis](./source-tree-analysis.md) — Annotated directory tree, critical folders, entry points, network/storage architecture
- [Development Guide](./development-guide.md) — Prerequisites, environment setup, workflow, testing, adding services, code conventions
- [Deployment Guide](./deployment-guide.md) — Deploy procedure, image management, environment config, backup, network/port mappings

## Existing Documentation (User-Facing)

These documents were created before this scan and provide detailed user guides:

- [Setup Guide](./SETUP.md) — Complete step-by-step installation (54KB, covers all setup levels)
- [Architecture Overview](./ARCHITECTURE.md) — Network topology diagrams, service connections, access levels, design decisions
- [Quick Reference](./REFERENCE.md) — All URLs, ports, IPs, service connection guide, common commands
- [Upgrading](./UPGRADING.md) — Version upgrade procedures
- [Backup & Restore](./BACKUP.md) — Volume backup automation, restore procedures
- [Home Assistant](./HOME-ASSISTANT.md) — Home Assistant integration for notifications
- [Troubleshooting](./TROUBLESHOOTING.md) — Common issues and fixes (stuck downloads, DNS, 4K, VPN)
- [Legal](./LEGAL.md) — Legal disclaimer and intended use

## Root-Level Documentation

- [README](../README.md) — Project overview, features, getting started links
- [Contributing](../CONTRIBUTING.md) — Project structure, multi-file architecture, pre-commit hooks, release process
- [CLAUDE.md](../CLAUDE.md) — AI assistant instructions (deployed to NAS for operational context)
- [Changelog](../CHANGELOG.md) — Version history

## Getting Started (AI Development Context)

When working on this project with AI assistance:

1. **Understand the architecture**: Start with [Architecture Technical Reference](./architecture-technical.md) for the full service dependency graph, IP allocation, and inter-service communication patterns
2. **Know the source tree**: Reference [Source Tree Analysis](./source-tree-analysis.md) for file locations and the configuration pattern (`.example` → gitignored actual file)
3. **Follow development workflow**: See [Development Guide](./development-guide.md) for how to add services, modify configs, and deploy changes
4. **Respect critical rules**:
   - **Never `docker compose down`** on arr-stack (kills Pi-hole DNS)
   - **Always `--force-recreate`** when restarting Gluetun (dependent services need fresh network namespace)
   - **Never commit secrets** — pre-commit hooks enforce this
   - **All Docker commands run on the NAS via SSH**, not locally
5. **For brownfield PRD**: This index provides complete context for planning new features on top of the existing stack

## Key Architectural Constraints

- Pi-hole provides DNS/DHCP for the entire LAN — stopping it = total network failure
- VPN services share Gluetun's network namespace (`localhost` between them, `gluetun` hostname from outside)
- macvlan containers cannot reach the Docker host (workaround: static route in Tailscale container)
- Admin UIs are LAN-only by default (Cloudflare Tunnel traffic appears local, bypassing auth)
- `.lan` domains require both Pi-hole DNS entry AND Traefik route
- Compose files are the source of truth — no Docker labels for routing (use `traefik/dynamic/`)
